{"ast":null,"code":"import React,{useState}from'react';import{Link}from'react-router-dom';import{Helmet}from'react-helmet-async';import{useQuery}from'react-query';import{busesAPI}from'../../services/api';import{Bus,Search,MapPin,Users}from'lucide-react';import LoadingSpinner from'../../components/UI/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Buses=()=>{var _data$data;const[searchTerm,setSearchTerm]=useState('');const{data,isLoading}=useQuery('buses',()=>busesAPI.getBuses());const buses=(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.buses)||[];const filteredBuses=buses.filter(bus=>{var _bus$name,_bus$busNumber;return((_bus$name=bus.name)===null||_bus$name===void 0?void 0:_bus$name.toLowerCase().includes(searchTerm.toLowerCase()))||((_bus$busNumber=bus.busNumber)===null||_bus$busNumber===void 0?void 0:_bus$busNumber.toLowerCase().includes(searchTerm.toLowerCase()));});if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\"})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Buses - College Transport Management System\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Buses\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-gray-600\",children:\"View all available buses\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\",children:/*#__PURE__*/_jsx(Search,{className:\"h-5 w-5 text-gray-400\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search buses...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"})]})}),filteredBuses.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredBuses.map(bus=>/*#__PURE__*/_jsxs(Link,{to:\"/app/buses/\".concat(bus._id),className:\"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-100 rounded-full p-3\",children:/*#__PURE__*/_jsx(Bus,{className:\"h-6 w-6 text-blue-600\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"px-3 py-1 rounded-full text-xs font-semibold \".concat(bus.status==='active'?'bg-green-100 text-green-800':bus.status==='maintenance'?'bg-yellow-100 text-yellow-800':'bg-gray-100 text-gray-800'),children:bus.status})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-900 mb-2\",children:bus.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mb-4\",children:[\"Bus #\",bus.busNumber]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(Users,{className:\"h-4 w-4 mr-2\"}),\"Capacity: \",bus.capacity,\" seats\"]}),bus.driverId&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm text-gray-600\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"h-4 w-4 mr-2\"}),\"Driver assigned\"]})]})]},bus._id))}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-12 text-center\",children:[/*#__PURE__*/_jsx(Bus,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-2\",children:\"No buses found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Try adjusting your search\"})]})]})]});};export default Buses;","map":{"version":3,"names":["React","useState","Link","Helmet","useQuery","busesAPI","Bus","Search","MapPin","Users","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Buses","_data$data","searchTerm","setSearchTerm","data","isLoading","getBuses","buses","filteredBuses","filter","bus","_bus$name","_bus$busNumber","name","toLowerCase","includes","busNumber","className","children","size","type","placeholder","value","onChange","e","target","length","map","to","concat","_id","status","capacity","driverId"],"sources":["C:/Users/Giriraj singh/Desktop/vhh/client/src/pages/Buses/Buses.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useQuery } from 'react-query';\r\nimport { busesAPI } from '../../services/api';\r\nimport { Bus, Search, MapPin, Users } from 'lucide-react';\r\nimport LoadingSpinner from '../../components/UI/LoadingSpinner';\r\n\r\nconst Buses = () => {\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const { data, isLoading } = useQuery('buses', () => busesAPI.getBuses());\r\n\r\n  const buses = data?.data?.buses || [];\r\n\r\n  const filteredBuses = buses.filter(bus =>\r\n    bus.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    bus.busNumber?.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <LoadingSpinner size=\"lg\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Buses - College Transport Management System</title>\r\n      </Helmet>\r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900\">Buses</h1>\r\n          <p className=\"mt-2 text-gray-600\">View all available buses</p>\r\n        </div>\r\n\r\n        <div className=\"bg-white rounded-lg shadow p-4\">\r\n          <div className=\"relative\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n              <Search className=\"h-5 w-5 text-gray-400\" />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search buses...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {filteredBuses.length > 0 ? (\r\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredBuses.map((bus) => (\r\n              <Link\r\n                key={bus._id}\r\n                to={`/app/buses/${bus._id}`}\r\n                className=\"bg-white rounded-lg shadow hover:shadow-lg transition-shadow p-6\"\r\n              >\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                  <div className=\"bg-blue-100 rounded-full p-3\">\r\n                    <Bus className=\"h-6 w-6 text-blue-600\" />\r\n                  </div>\r\n                  <span\r\n                    className={`px-3 py-1 rounded-full text-xs font-semibold ${\r\n                      bus.status === 'active'\r\n                        ? 'bg-green-100 text-green-800'\r\n                        : bus.status === 'maintenance'\r\n                        ? 'bg-yellow-100 text-yellow-800'\r\n                        : 'bg-gray-100 text-gray-800'\r\n                    }`}\r\n                  >\r\n                    {bus.status}\r\n                  </span>\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">{bus.name}</h3>\r\n                <p className=\"text-gray-600 mb-4\">Bus #{bus.busNumber}</p>\r\n                <div className=\"space-y-2\">\r\n                  <div className=\"flex items-center text-sm text-gray-600\">\r\n                    <Users className=\"h-4 w-4 mr-2\" />\r\n                    Capacity: {bus.capacity} seats\r\n                  </div>\r\n                  {bus.driverId && (\r\n                    <div className=\"flex items-center text-sm text-gray-600\">\r\n                      <MapPin className=\"h-4 w-4 mr-2\" />\r\n                      Driver assigned\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white rounded-lg shadow p-12 text-center\">\r\n            <Bus className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No buses found</h3>\r\n            <p className=\"text-gray-600\">Try adjusting your search</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Buses;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"C:/Users/Giriraj singh/Desktop/vhh/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{createContext,useContext,useReducer,useEffect}from'react';import{useQuery,useMutation,useQueryClient}from'react-query';import{useNavigate}from'react-router-dom';import toast from'react-hot-toast';import api from'../services/api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();// Auth reducer\nconst authReducer=(state,action)=>{switch(action.type){case'SET_LOADING':return _objectSpread(_objectSpread({},state),{},{loading:action.payload});case'SET_USER':return _objectSpread(_objectSpread({},state),{},{user:action.payload,loading:false});case'SET_ERROR':return _objectSpread(_objectSpread({},state),{},{error:action.payload,loading:false});case'LOGOUT':return _objectSpread(_objectSpread({},state),{},{user:null,error:null,loading:false});case'UPDATE_USER':return _objectSpread(_objectSpread({},state),{},{user:_objectSpread(_objectSpread({},state.user),action.payload)});default:return state;}};const initialState={user:null,loading:true,error:null};export const AuthProvider=_ref=>{let{children}=_ref;const[state,dispatch]=useReducer(authReducer,initialState);const queryClient=useQueryClient();const navigate=useNavigate();// Get current user\nconst{data:userData,isLoading,error}=useQuery('currentUser',()=>api.get('/auth/me').then(res=>res.data.data.user),{retry:false,onError:error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Token is invalid, clear it\nlocalStorage.removeItem('token');dispatch({type:'LOGOUT'});}}});// Update state when user data changes\nuseEffect(()=>{if(userData){dispatch({type:'SET_USER',payload:userData});}else if(error){dispatch({type:'SET_ERROR',payload:error.message});}else if(!isLoading){dispatch({type:'SET_LOADING',payload:false});}},[userData,error,isLoading]);// Login mutation\nconst loginMutation=useMutation(credentials=>api.post('/auth/login',credentials),{onSuccess:response=>{const{user,token}=response.data.data;localStorage.setItem('token',token);dispatch({type:'SET_USER',payload:user});queryClient.setQueryData('currentUser',user);toast.success('Login successful!');// Redirect based on role\nif(user.role==='admin'){navigate('/app/admin');}else if(user.role==='driver'){navigate('/app/driver');}else{navigate('/app/dashboard');}},onError:error=>{var _error$response2,_error$response2$data;const message=((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Login failed';dispatch({type:'SET_ERROR',payload:message});toast.error(message);}});// Register mutation\nconst registerMutation=useMutation(userData=>api.post('/auth/register',userData),{onSuccess:response=>{const{user,token}=response.data.data;localStorage.setItem('token',token);dispatch({type:'SET_USER',payload:user});queryClient.setQueryData('currentUser',user);toast.success('Registration successful!');navigate('/app/dashboard');},onError:error=>{var _error$response3,_error$response3$data;const message=((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Registration failed';dispatch({type:'SET_ERROR',payload:message});toast.error(message);}});// Logout mutation\nconst logoutMutation=useMutation(()=>api.post('/auth/logout'),{onSuccess:()=>{localStorage.removeItem('token');dispatch({type:'LOGOUT'});queryClient.clear();toast.success('Logged out successfully');navigate('/');},onError:()=>{// Even if logout fails on server, clear local state\nlocalStorage.removeItem('token');dispatch({type:'LOGOUT'});queryClient.clear();navigate('/');}});// Change password mutation\nconst changePasswordMutation=useMutation(passwordData=>api.post('/auth/change-password',passwordData),{onSuccess:()=>{toast.success('Password changed successfully');},onError:error=>{var _error$response4,_error$response4$data;const message=((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to change password';toast.error(message);}});// Forgot password mutation\nconst forgotPasswordMutation=useMutation(email=>api.post('/auth/forgot-password',{email}),{onSuccess:()=>{toast.success('Password reset link sent to your email');},onError:error=>{var _error$response5,_error$response5$data;const message=((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to send reset link';toast.error(message);}});// Reset password mutation\nconst resetPasswordMutation=useMutation(data=>api.post('/auth/reset-password',data),{onSuccess:()=>{toast.success('Password reset successfully');navigate('/login');},onError:error=>{var _error$response6,_error$response6$data;const message=((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||'Failed to reset password';toast.error(message);}});// Update profile mutation\nconst updateProfileMutation=useMutation(profileData=>{var _state$user;return api.put(\"/users/\".concat((_state$user=state.user)===null||_state$user===void 0?void 0:_state$user._id),profileData);},{onSuccess:response=>{const updatedUser=response.data.data.user;dispatch({type:'UPDATE_USER',payload:updatedUser});queryClient.setQueryData('currentUser',updatedUser);toast.success('Profile updated successfully');},onError:error=>{var _error$response7,_error$response7$data;const message=((_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message)||'Failed to update profile';toast.error(message);}});// Helper functions\nconst login=credentials=>{dispatch({type:'SET_LOADING',payload:true});loginMutation.mutate(credentials);};const register=userData=>{dispatch({type:'SET_LOADING',payload:true});registerMutation.mutate(userData);};const logout=()=>{logoutMutation.mutate();};const changePassword=passwordData=>{changePasswordMutation.mutate(passwordData);};const forgotPassword=email=>{forgotPasswordMutation.mutate(email);};const resetPassword=data=>{resetPasswordMutation.mutate(data);};const updateProfile=profileData=>{updateProfileMutation.mutate(profileData);};const hasRole=roles=>{if(!state.user)return false;if(Array.isArray(roles)){return roles.includes(state.user.role);}return state.user.role===roles;};const hasPermission=permission=>{if(!state.user)return false;// Define permissions based on roles\nconst permissions={admin:['read','write','delete','manage_users','manage_buses','manage_drivers','manage_routes','manage_schedules','view_reports'],driver:['read','update_location','view_schedule'],staff:['read','book'],student:['read','book']};const userPermissions=permissions[state.user.role]||[];return userPermissions.includes(permission);};const value={// State\nuser:state.user,loading:state.loading,error:state.error,// Actions\nlogin,register,logout,changePassword,forgotPassword,resetPassword,updateProfile,// Helpers\nhasRole,hasPermission,isAuthenticated:!!state.user,// Mutation states\nisLoggingIn:loginMutation.isLoading,isRegistering:registerMutation.isLoading,isLoggingOut:logoutMutation.isLoading,isChangingPassword:changePasswordMutation.isLoading,isUpdatingProfile:updateProfileMutation.isLoading};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};export const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","useQuery","useMutation","useQueryClient","useNavigate","toast","api","jsx","_jsx","AuthContext","authReducer","state","action","type","_objectSpread","loading","payload","user","error","initialState","AuthProvider","_ref","children","dispatch","queryClient","navigate","data","userData","isLoading","get","then","res","retry","onError","_error$response","response","status","localStorage","removeItem","message","loginMutation","credentials","post","onSuccess","token","setItem","setQueryData","success","role","_error$response2","_error$response2$data","registerMutation","_error$response3","_error$response3$data","logoutMutation","clear","changePasswordMutation","passwordData","_error$response4","_error$response4$data","forgotPasswordMutation","email","_error$response5","_error$response5$data","resetPasswordMutation","_error$response6","_error$response6$data","updateProfileMutation","profileData","_state$user","put","concat","_id","updatedUser","_error$response7","_error$response7$data","login","mutate","register","logout","changePassword","forgotPassword","resetPassword","updateProfile","hasRole","roles","Array","isArray","includes","hasPermission","permission","permissions","admin","driver","staff","student","userPermissions","value","isAuthenticated","isLoggingIn","isRegistering","isLoggingOut","isChangingPassword","isUpdatingProfile","Provider","useAuth","context","Error"],"sources":["C:/Users/Giriraj singh/Desktop/vhh/client/src/contexts/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport toast from 'react-hot-toast';\r\nimport api from '../services/api';\r\n\r\nconst AuthContext = createContext();\r\n\r\n// Auth reducer\r\nconst authReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LOADING':\r\n      return { ...state, loading: action.payload };\r\n    case 'SET_USER':\r\n      return { ...state, user: action.payload, loading: false };\r\n    case 'SET_ERROR':\r\n      return { ...state, error: action.payload, loading: false };\r\n    case 'LOGOUT':\r\n      return { ...state, user: null, error: null, loading: false };\r\n    case 'UPDATE_USER':\r\n      return { ...state, user: { ...state.user, ...action.payload } };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  user: null,\r\n  loading: true,\r\n  error: null,\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(authReducer, initialState);\r\n  const queryClient = useQueryClient();\r\n  const navigate = useNavigate();\r\n\r\n  // Get current user\r\n  const { data: userData, isLoading, error } = useQuery(\r\n    'currentUser',\r\n    () => api.get('/auth/me').then(res => res.data.data.user),\r\n    {\r\n      retry: false,\r\n      onError: (error) => {\r\n        if (error.response?.status === 401) {\r\n          // Token is invalid, clear it\r\n          localStorage.removeItem('token');\r\n          dispatch({ type: 'LOGOUT' });\r\n        }\r\n      },\r\n    }\r\n  );\r\n\r\n  // Update state when user data changes\r\n  useEffect(() => {\r\n    if (userData) {\r\n      dispatch({ type: 'SET_USER', payload: userData });\r\n    } else if (error) {\r\n      dispatch({ type: 'SET_ERROR', payload: error.message });\r\n    } else if (!isLoading) {\r\n      dispatch({ type: 'SET_LOADING', payload: false });\r\n    }\r\n  }, [userData, error, isLoading]);\r\n\r\n  // Login mutation\r\n  const loginMutation = useMutation(\r\n    (credentials) => api.post('/auth/login', credentials),\r\n    {\r\n      onSuccess: (response) => {\r\n        const { user, token } = response.data.data;\r\n        localStorage.setItem('token', token);\r\n        dispatch({ type: 'SET_USER', payload: user });\r\n        queryClient.setQueryData('currentUser', user);\r\n        toast.success('Login successful!');\r\n        \r\n        // Redirect based on role\r\n        if (user.role === 'admin') {\r\n          navigate('/app/admin');\r\n        } else if (user.role === 'driver') {\r\n          navigate('/app/driver');\r\n        } else {\r\n          navigate('/app/dashboard');\r\n        }\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Login failed';\r\n        dispatch({ type: 'SET_ERROR', payload: message });\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Register mutation\r\n  const registerMutation = useMutation(\r\n    (userData) => api.post('/auth/register', userData),\r\n    {\r\n      onSuccess: (response) => {\r\n        const { user, token } = response.data.data;\r\n        localStorage.setItem('token', token);\r\n        dispatch({ type: 'SET_USER', payload: user });\r\n        queryClient.setQueryData('currentUser', user);\r\n        toast.success('Registration successful!');\r\n        navigate('/app/dashboard');\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Registration failed';\r\n        dispatch({ type: 'SET_ERROR', payload: message });\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Logout mutation\r\n  const logoutMutation = useMutation(\r\n    () => api.post('/auth/logout'),\r\n    {\r\n      onSuccess: () => {\r\n        localStorage.removeItem('token');\r\n        dispatch({ type: 'LOGOUT' });\r\n        queryClient.clear();\r\n        toast.success('Logged out successfully');\r\n        navigate('/');\r\n      },\r\n      onError: () => {\r\n        // Even if logout fails on server, clear local state\r\n        localStorage.removeItem('token');\r\n        dispatch({ type: 'LOGOUT' });\r\n        queryClient.clear();\r\n        navigate('/');\r\n      },\r\n    }\r\n  );\r\n\r\n  // Change password mutation\r\n  const changePasswordMutation = useMutation(\r\n    (passwordData) => api.post('/auth/change-password', passwordData),\r\n    {\r\n      onSuccess: () => {\r\n        toast.success('Password changed successfully');\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Failed to change password';\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Forgot password mutation\r\n  const forgotPasswordMutation = useMutation(\r\n    (email) => api.post('/auth/forgot-password', { email }),\r\n    {\r\n      onSuccess: () => {\r\n        toast.success('Password reset link sent to your email');\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Failed to send reset link';\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Reset password mutation\r\n  const resetPasswordMutation = useMutation(\r\n    (data) => api.post('/auth/reset-password', data),\r\n    {\r\n      onSuccess: () => {\r\n        toast.success('Password reset successfully');\r\n        navigate('/login');\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Failed to reset password';\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Update profile mutation\r\n  const updateProfileMutation = useMutation(\r\n    (profileData) => api.put(`/users/${state.user?._id}`, profileData),\r\n    {\r\n      onSuccess: (response) => {\r\n        const updatedUser = response.data.data.user;\r\n        dispatch({ type: 'UPDATE_USER', payload: updatedUser });\r\n        queryClient.setQueryData('currentUser', updatedUser);\r\n        toast.success('Profile updated successfully');\r\n      },\r\n      onError: (error) => {\r\n        const message = error.response?.data?.message || 'Failed to update profile';\r\n        toast.error(message);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Helper functions\r\n  const login = (credentials) => {\r\n    dispatch({ type: 'SET_LOADING', payload: true });\r\n    loginMutation.mutate(credentials);\r\n  };\r\n\r\n  const register = (userData) => {\r\n    dispatch({ type: 'SET_LOADING', payload: true });\r\n    registerMutation.mutate(userData);\r\n  };\r\n\r\n  const logout = () => {\r\n    logoutMutation.mutate();\r\n  };\r\n\r\n  const changePassword = (passwordData) => {\r\n    changePasswordMutation.mutate(passwordData);\r\n  };\r\n\r\n  const forgotPassword = (email) => {\r\n    forgotPasswordMutation.mutate(email);\r\n  };\r\n\r\n  const resetPassword = (data) => {\r\n    resetPasswordMutation.mutate(data);\r\n  };\r\n\r\n  const updateProfile = (profileData) => {\r\n    updateProfileMutation.mutate(profileData);\r\n  };\r\n\r\n  const hasRole = (roles) => {\r\n    if (!state.user) return false;\r\n    if (Array.isArray(roles)) {\r\n      return roles.includes(state.user.role);\r\n    }\r\n    return state.user.role === roles;\r\n  };\r\n\r\n  const hasPermission = (permission) => {\r\n    if (!state.user) return false;\r\n    \r\n    // Define permissions based on roles\r\n    const permissions = {\r\n      admin: ['read', 'write', 'delete', 'manage_users', 'manage_buses', 'manage_drivers', 'manage_routes', 'manage_schedules', 'view_reports'],\r\n      driver: ['read', 'update_location', 'view_schedule'],\r\n      staff: ['read', 'book'],\r\n      student: ['read', 'book']\r\n    };\r\n\r\n    const userPermissions = permissions[state.user.role] || [];\r\n    return userPermissions.includes(permission);\r\n  };\r\n\r\n  const value = {\r\n    // State\r\n    user: state.user,\r\n    loading: state.loading,\r\n    error: state.error,\r\n    \r\n    // Actions\r\n    login,\r\n    register,\r\n    logout,\r\n    changePassword,\r\n    forgotPassword,\r\n    resetPassword,\r\n    updateProfile,\r\n    \r\n    // Helpers\r\n    hasRole,\r\n    hasPermission,\r\n    isAuthenticated: !!state.user,\r\n    \r\n    // Mutation states\r\n    isLoggingIn: loginMutation.isLoading,\r\n    isRegistering: registerMutation.isLoading,\r\n    isLoggingOut: logoutMutation.isLoading,\r\n    isChangingPassword: changePasswordMutation.isLoading,\r\n    isUpdatingProfile: updateProfileMutation.isLoading,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}